---
import { getUpcomingEvents } from "../utils/calendar";
import dayjs from "dayjs";
import { Calendar, MapPin, Clock } from "lucide-react";

const events = await getUpcomingEvents(3);
---

<div class="space-y-4">
  {
    events.length === 0 ? (
      <div class="p-4 bg-white/50 border-[3px] border-[#0F2830] text-[#0F2830]">
        <p class="font-bold">Check out our full calendar for details.</p>
      </div>
    ) : (
      events.map((event) => (
        <div class="bg-white border-[3px] border-[#0F2830] p-6 shadow-[4px_4px_0px_0px_#45B074] hover:shadow-none hover:translate-y-1 transition-all">
          <div class="flex items-start gap-4">
            <div class="bg-[#0F2830] text-white p-3 flex flex-col items-center justify-center min-w-16">
              <span class="text-xs font-bold uppercase tracking-wider">
                {dayjs(event.start).format("MMM")}
              </span>
              <span class="text-2xl font-black">
                {dayjs(event.start).format("D")}
              </span>
            </div>
            <div>
              <h3 class="text-xl font-bold uppercase text-[#0F2830] leading-tight mb-2">
                {event.title}
              </h3>
              <div class="flex flex-col gap-1 text-sm font-medium text-[#0F2830]/80">
                <div class="flex items-center gap-2">
                  <Clock size={16} />
                  <span>{dayjs(event.start).format("h:mm A")}</span>
                </div>
                {event.location && (
                  <div class="flex items-center gap-2">
                    <MapPin size={16} />
                    <span>{event.location}</span>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      ))
    )
  }
  <div class="pt-4 text-center">
    <a
      href="/calendar"
      class="inline-flex items-center gap-2 font-bold uppercase tracking-wider text-[#0F2830] hover:text-[#45B074] transition-colors border-b-2 border-transparent hover:border-[#45B074]"
    >
      View Full Calendar ->
    </a>
  </div>
</div>
